\hypertarget{a00203_source}{}\doxysection{truss.\+hh}
\label{a00203_source}\index{truss.hh@{truss.hh}}
\mbox{\hyperlink{a00203}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// SPDX-\/FileCopyrightText: 2021-\/2024 The Ikarus Developers mueller@ibb.uni-\/stuttgart.de}}
\DoxyCodeLine{2 \textcolor{comment}{// SPDX-\/License-\/Identifier: LGPL-\/3.0-\/or-\/later}}
\DoxyCodeLine{3 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <optional>}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <dune/localfefunctions/eigenDuneTransformations.hh>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00143}{ikarus/finiteelements/fehelper.hh}}>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{a00218}{ikarus/finiteelements/ferequirements.hh}}>}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{namespace }\mbox{\hyperlink{a00375}{Ikarus}} \{}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{keyword}{template} <\textcolor{keyword}{typename} PreFE, \textcolor{keyword}{typename} FE>}
\DoxyCodeLine{22 \textcolor{keyword}{class }Truss;}
\DoxyCodeLine{23 }
\DoxyCodeLine{27 \textcolor{keyword}{struct }\mbox{\hyperlink{a01523}{TrussPre}}}
\DoxyCodeLine{28 \{}
\DoxyCodeLine{29   \textcolor{keywordtype}{double} \mbox{\hyperlink{a01523_ac9e7517a9be64fd9c743c1c11dfd30f9}{E}}; \textcolor{comment}{// Young's modulus}}
\DoxyCodeLine{30   \textcolor{keywordtype}{double} \mbox{\hyperlink{a01523_adebed226744a01c44269cadd0bf9998f}{A}}; \textcolor{comment}{// Cross-\/section area}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32   \textcolor{keyword}{template} <\textcolor{keyword}{typename} PreFE, \textcolor{keyword}{typename} FE>}
\DoxyCodeLine{33   \textcolor{keyword}{using }\mbox{\hyperlink{a01519}{Skill}} = \mbox{\hyperlink{a01519}{Truss<PreFE, FE>}};}
\DoxyCodeLine{34 \};}
\DoxyCodeLine{35 }
\DoxyCodeLine{44 \textcolor{keyword}{template} <\textcolor{keyword}{typename} PreFE, \textcolor{keyword}{typename} FE>}
\DoxyCodeLine{45 \textcolor{keyword}{class }\mbox{\hyperlink{a01519}{Truss}}}
\DoxyCodeLine{46     : \textcolor{keyword}{public} \mbox{\hyperlink{a01395}{ResultTypeBase}}<ResultTypes::cauchyAxialForce, ResultTypes::PK2AxialForce, ResultTypes::linearAxialForce>}
\DoxyCodeLine{47 \{}
\DoxyCodeLine{48 \textcolor{keyword}{public}:}
\DoxyCodeLine{49   \textcolor{keyword}{using }\mbox{\hyperlink{a01399}{Traits}}       = \mbox{\hyperlink{a01331_a826c356a5afb013faffb5f7ac893cff4}{PreFE::Traits}};}
\DoxyCodeLine{50   \textcolor{keyword}{using }\mbox{\hyperlink{a01519_aa1f84ce75ed79a35a1f3daa0d7ecbb18}{BasisHandler}} = \textcolor{keyword}{typename} \mbox{\hyperlink{a01399_a129085c175bca28f94c71699b734ba04}{Traits::BasisHandler}};}
\DoxyCodeLine{51   \textcolor{keyword}{using }\mbox{\hyperlink{a01519_a6417a09910a66224d26c7436b478c0bb}{FlatBasis}}    = \textcolor{keyword}{typename} \mbox{\hyperlink{a01399_a81feef959fedef62b2e1daabbd52b5f2}{Traits::FlatBasis}};}
\DoxyCodeLine{52   \textcolor{keyword}{using }\mbox{\hyperlink{a01359}{Requirement}} =}
\DoxyCodeLine{53       \mbox{\hyperlink{a01359}{FERequirementsFactory<FESolutions::displacement, FEParameter::loadfactor, Traits::useEigenRef>::type}};}
\DoxyCodeLine{54   \textcolor{keyword}{using }\mbox{\hyperlink{a01519_a2fe6312a266dde582b526f80bab5513e}{LocalView}} = \textcolor{keyword}{typename} \mbox{\hyperlink{a01399_a06bdad066f621e46875af45a22677a3c}{Traits::LocalView}};}
\DoxyCodeLine{55   \textcolor{keyword}{using }\mbox{\hyperlink{a01519_a612cd26d67f7be9923188c46bfedeba3}{Geometry}}  = \textcolor{keyword}{typename} \mbox{\hyperlink{a01399_a0b7be1104fba2d190e3fed46f291a851}{Traits::Geometry}};}
\DoxyCodeLine{56   \textcolor{keyword}{using }\mbox{\hyperlink{a01519_a703d7e18265f53bf4e24390a3123f24c}{GridView}}  = \textcolor{keyword}{typename} \mbox{\hyperlink{a01399_a3ec0294824df467074f5070cb58f5a91}{Traits::GridView}};}
\DoxyCodeLine{57   \textcolor{keyword}{using }\mbox{\hyperlink{a01519_ad953dbda6b497d1e6fe27405d2d74edd}{Element}}   = \textcolor{keyword}{typename} \mbox{\hyperlink{a01399_ac4668b9c9142defdf3b70cca8eeb30c4}{Traits::Element}};}
\DoxyCodeLine{58   \textcolor{keyword}{using }\mbox{\hyperlink{a01523}{Pre}}       = \mbox{\hyperlink{a01523}{TrussPre}};}
\DoxyCodeLine{59 }
\DoxyCodeLine{60   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{a01519_ad0e7e96505e71d75eb2f64b079169acb}{myDim}}    = \mbox{\hyperlink{a01399_ae15b8efa9f66a3caee81d99dd5c648de}{Traits::mydim}};}
\DoxyCodeLine{61   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{a01519_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} = \mbox{\hyperlink{a01399_a5d611e1d48285bac5c5ebd6fda9c7cc7}{Traits::worlddim}};}
\DoxyCodeLine{62   \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{a01519_ad0e7e96505e71d75eb2f64b079169acb}{myDim}} == 1, \textcolor{stringliteral}{"{}Truss elements should have myDim == 1"{}});}
\DoxyCodeLine{63 }
\DoxyCodeLine{72   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ST>}
\DoxyCodeLine{73   \textcolor{keyword}{struct }\mbox{\hyperlink{a01527}{KinematicVariables}}}
\DoxyCodeLine{74   \{}
\DoxyCodeLine{75     \textcolor{keywordtype}{double} \mbox{\hyperlink{a01527_a05681746b98b7ea4259896cbd87727b5}{L}};                  }
\DoxyCodeLine{76     ST \mbox{\hyperlink{a01527_a507fe4fbad5adfb4df5f70e690987f27}{l}};                      }
\DoxyCodeLine{77     ST \mbox{\hyperlink{a01527_a947ad2c350846f2abb6f94aff9106db7}{Elin}};                   }
\DoxyCodeLine{78     ST \mbox{\hyperlink{a01527_a7d0090ec5c0de738cb936cf8b69d0985}{Egl}};                    }
\DoxyCodeLine{79     Eigen::VectorX<ST> \mbox{\hyperlink{a01527_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}};   }
\DoxyCodeLine{80     Eigen::MatrixX<ST> \mbox{\hyperlink{a01527_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}; }
\DoxyCodeLine{81   \};}
\DoxyCodeLine{82 }
\DoxyCodeLine{87   \textcolor{keyword}{explicit} \mbox{\hyperlink{a01519_a31c3128e6407c9b869b6eb4a3436aae6}{Truss}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01523}{Pre}}\& pre)}
\DoxyCodeLine{88       : E\{pre.E\},}
\DoxyCodeLine{89         A\{pre.A\} \{\}}
\DoxyCodeLine{90 }
\DoxyCodeLine{99   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ST = \textcolor{keywordtype}{double}>}
\DoxyCodeLine{100   \textcolor{keyword}{auto} \mbox{\hyperlink{a01519_af6a1883a353d39ea3aee75c1b5b59514}{displacement}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01359}{Requirement}}\& par,}
\DoxyCodeLine{101                     \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ST>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{102     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& d = par.\mbox{\hyperlink{a01359_a523ed390dfea00379b5b638e523ddb74}{globalSolution}}();}
\DoxyCodeLine{103     \textcolor{keyword}{auto} disp     = Ikarus::FEHelper::localSolutionBlockVector<Traits>(d, underlying().localView(), dx);}
\DoxyCodeLine{104     \textcolor{keywordflow}{return} disp;}
\DoxyCodeLine{105   \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{116   \textcolor{keyword}{template} <\textcolor{keyword}{class} ST = \textcolor{keywordtype}{double}>}
\DoxyCodeLine{117   \mbox{\hyperlink{a01527}{KinematicVariables<ST>}} \mbox{\hyperlink{a01519_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(}
\DoxyCodeLine{118       \textcolor{keyword}{const} \mbox{\hyperlink{a01359}{Requirement}}\& par,}
\DoxyCodeLine{119       \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ST>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{120     \mbox{\hyperlink{a01527}{KinematicVariables<ST>}} kin;}
\DoxyCodeLine{121     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& localView    = underlying().localView();}
\DoxyCodeLine{122     \textcolor{keyword}{const} \textcolor{keyword}{auto}\& tree         = localView.tree();}
\DoxyCodeLine{123     \textcolor{keyword}{const} \textcolor{keyword}{auto} numberOfNodes = tree.child(0).finiteElement().size();}
\DoxyCodeLine{124     \textcolor{keyword}{auto}\& ele                = localView.element();}
\DoxyCodeLine{125     \textcolor{keyword}{const} \textcolor{keyword}{auto} X1            = Dune::toEigen(ele.geometry().corner(0));}
\DoxyCodeLine{126     \textcolor{keyword}{const} \textcolor{keyword}{auto} X2            = Dune::toEigen(ele.geometry().corner(1));}
\DoxyCodeLine{127     \textcolor{keyword}{const} \textcolor{keyword}{auto} u             = \mbox{\hyperlink{a00370_gaf9d7cf401f9f03ce1aae728c646ce178}{Dune::viewAsEigenMatrixAsDynFixed}}(\mbox{\hyperlink{a01519_af6a1883a353d39ea3aee75c1b5b59514}{displacement}}(par, dx)).transpose().eval();}
\DoxyCodeLine{128     \textcolor{keyword}{const} \textcolor{keyword}{auto} A1            = X2 -\/ X1;}
\DoxyCodeLine{129     \textcolor{keyword}{const} \textcolor{keyword}{auto} ud1           = u.col(1) -\/ u.col(0);}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{keyword}{const} Eigen::Vector<ST, worldDim> x1 = X1 + u.col(0);}
\DoxyCodeLine{132     \textcolor{keyword}{const} Eigen::Vector<ST, worldDim> x2 = X2 + u.col(1);}
\DoxyCodeLine{133 }
\DoxyCodeLine{134     \textcolor{keyword}{const} \textcolor{keywordtype}{double} Lsquared = A1.squaredNorm();}
\DoxyCodeLine{135     \textcolor{keyword}{const} ST lsquared     = (x2 -\/ x1).squaredNorm();}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     kin.\mbox{\hyperlink{a01527_a05681746b98b7ea4259896cbd87727b5}{L}} = sqrt(Lsquared);}
\DoxyCodeLine{138     kin.\mbox{\hyperlink{a01527_a507fe4fbad5adfb4df5f70e690987f27}{l}} = sqrt(lsquared);}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     \textcolor{comment}{// Linear strain}}
\DoxyCodeLine{141     kin.\mbox{\hyperlink{a01527_a947ad2c350846f2abb6f94aff9106db7}{Elin}} = (kin.\mbox{\hyperlink{a01527_a507fe4fbad5adfb4df5f70e690987f27}{l}} -\/ kin.\mbox{\hyperlink{a01527_a05681746b98b7ea4259896cbd87727b5}{L}}) / kin.\mbox{\hyperlink{a01527_a05681746b98b7ea4259896cbd87727b5}{L}};}
\DoxyCodeLine{142 }
\DoxyCodeLine{143     \textcolor{comment}{// Green-\/Lagrange strains}}
\DoxyCodeLine{144     kin.\mbox{\hyperlink{a01527_a7d0090ec5c0de738cb936cf8b69d0985}{Egl}} = 0.5 * (lsquared -\/ Lsquared) / Lsquared;}
\DoxyCodeLine{145 }
\DoxyCodeLine{146     \textcolor{comment}{// First derivative of Egl w.r.t displacements}}
\DoxyCodeLine{147     kin.\mbox{\hyperlink{a01527_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}}.setZero(\mbox{\hyperlink{a01519_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} * numberOfNodes);}
\DoxyCodeLine{148     kin.\mbox{\hyperlink{a01527_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}} << -\/A1 -\/ ud1, A1 + ud1;}
\DoxyCodeLine{149     kin.\mbox{\hyperlink{a01527_adad74786f3a49a82a7cd239aa3065bb0}{dEdu}} /= Lsquared;}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \textcolor{comment}{// Second derivative of Egl w.r.t displacements}}
\DoxyCodeLine{152     kin.\mbox{\hyperlink{a01527_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}.setIdentity(\mbox{\hyperlink{a01519_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} * numberOfNodes, \mbox{\hyperlink{a01519_a41e2a568f1739778e2277d5eec69cfce}{worldDim}} * numberOfNodes);}
\DoxyCodeLine{153     kin.\mbox{\hyperlink{a01527_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}.template topRightCorner<worldDim, worldDim>()   = -\/Eigen::Matrix<ST, worldDim, worldDim>::Identity();}
\DoxyCodeLine{154     kin.\mbox{\hyperlink{a01527_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}}.template bottomLeftCorner<worldDim, worldDim>() = -\/Eigen::Matrix<ST, worldDim, worldDim>::Identity();}
\DoxyCodeLine{155     kin.\mbox{\hyperlink{a01527_a0647f4c61cc8ee370d1b3b795a48c8e6}{ddEddu}} /= Lsquared;}
\DoxyCodeLine{156 }
\DoxyCodeLine{157     \textcolor{keywordflow}{return} kin;}
\DoxyCodeLine{158   \}}
\DoxyCodeLine{159 }
\DoxyCodeLine{160 \textcolor{keyword}{public}:}
\DoxyCodeLine{171   \textcolor{keyword}{template} <\textcolor{keyword}{template} <\textcolor{keyword}{typename}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{int}> \textcolor{keyword}{class }RT>}
\DoxyCodeLine{172   \textcolor{keyword}{requires}(supportsResultType<RT>())}
\DoxyCodeLine{173   \textcolor{keyword}{auto} \mbox{\hyperlink{a01519_a1e7e9cdb036a72153c163cb6e8fd2a18}{calculateAtImpl}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01359}{Requirement}}\& req, [[maybe\_unused]] \textcolor{keyword}{const} \mbox{\hyperlink{a01751}{Dune::FieldVector<double, Traits::mydim>}}\& local,}
\DoxyCodeLine{174                        Dune::PriorityTag<0>) \textcolor{keyword}{const} \{}
\DoxyCodeLine{175     \textcolor{keyword}{using }RTWrapper                            = \mbox{\hyperlink{a01383}{ResultWrapper<RT<double, myDim, myDim>}}, \mbox{\hyperlink{a00375_acfb09bb7db104db62d3d1d2dc3e009b2a57dea6f5039281b7fee517fc43bf3110}{ResultShape::Vector}}>;}
\DoxyCodeLine{176     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01519_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(req);}
\DoxyCodeLine{177     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (isSameResultType<RT, ResultTypes::cauchyAxialForce>) \{}
\DoxyCodeLine{178       \textcolor{keyword}{auto} N = Eigen::Vector<double, 1>\{E * A * Egl * l / L\}; \textcolor{comment}{// Axial force in deformed configuration}}
\DoxyCodeLine{179       \textcolor{keywordflow}{return} RTWrapper\{N\};}
\DoxyCodeLine{180     \}}
\DoxyCodeLine{181     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (isSameResultType<RT, ResultTypes::PK2AxialForce>) \{}
\DoxyCodeLine{182       \textcolor{keyword}{auto} N = Eigen::Vector<double, 1>\{E * A * Egl\}; \textcolor{comment}{// Axial force in undeformed configuration}}
\DoxyCodeLine{183       \textcolor{keywordflow}{return} RTWrapper\{N\};}
\DoxyCodeLine{184     \}}
\DoxyCodeLine{185     \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr} (isSameResultType<RT, ResultTypes::linearAxialForce>) \{}
\DoxyCodeLine{186       \textcolor{keyword}{auto} N = Eigen::Vector<double, 1>\{E * A * Elin\};}
\DoxyCodeLine{187       \textcolor{keywordflow}{return} RTWrapper\{N\};}
\DoxyCodeLine{188     \}}
\DoxyCodeLine{189   \}}
\DoxyCodeLine{190 }
\DoxyCodeLine{191 \textcolor{keyword}{private}:}
\DoxyCodeLine{192   \textcolor{comment}{//> CRTP}}
\DoxyCodeLine{193   \textcolor{keyword}{const} \textcolor{keyword}{auto}\& underlying()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{a01327}{FE}}\&\textcolor{keyword}{>}(*this); \}}
\DoxyCodeLine{194   \textcolor{keyword}{auto}\& underlying() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}FE\&\textcolor{keyword}{>}(*this); \}}
\DoxyCodeLine{195 }
\DoxyCodeLine{196   \textcolor{keywordtype}{double} E;}
\DoxyCodeLine{197   \textcolor{keywordtype}{double} A;}
\DoxyCodeLine{198 }
\DoxyCodeLine{199 \textcolor{keyword}{protected}:}
\DoxyCodeLine{200   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarType>}
\DoxyCodeLine{201   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01519_a5955fba6251da3eda818f6c14ef5ca73}{calculateMatrixImpl}}(}
\DoxyCodeLine{202       \textcolor{keyword}{const} \mbox{\hyperlink{a01359}{Requirement}}\& par, \textcolor{keyword}{const} \mbox{\hyperlink{a00375_a390d5311179ec61d163a29c943b3d1a0}{MatrixAffordance}}\& affordance, \textcolor{keyword}{typename} Traits::template MatrixType<> K,}
\DoxyCodeLine{203       \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ScalarType>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{204     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01519_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(par, dx);}
\DoxyCodeLine{205     K += E * A * L * (dEdu * dEdu.transpose() + ddEddu * Egl);}
\DoxyCodeLine{206   \}}
\DoxyCodeLine{207 }
\DoxyCodeLine{208   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarType>}
\DoxyCodeLine{209   \textcolor{keyword}{auto} \mbox{\hyperlink{a01519_ad11254e9306f1a740bab191314ee3108}{calculateScalarImpl}}(\textcolor{keyword}{const} \mbox{\hyperlink{a01359}{Requirement}}\& par, \mbox{\hyperlink{a00375_af6f894084edd9109762b86222995ef2a}{ScalarAffordance}} affordance,}
\DoxyCodeLine{210                            \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ScalarType>>>\& dx =}
\DoxyCodeLine{211                                std::nullopt) \textcolor{keyword}{const} -\/> ScalarType \{}
\DoxyCodeLine{212     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01519_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(par, dx);}
\DoxyCodeLine{213     \textcolor{keywordflow}{return} 0.5 * E * A * L * Egl * Egl;}
\DoxyCodeLine{214   \}}
\DoxyCodeLine{215 }
\DoxyCodeLine{216   \textcolor{keyword}{template} <\textcolor{keyword}{typename} ScalarType>}
\DoxyCodeLine{217   \textcolor{keywordtype}{void} \mbox{\hyperlink{a01519_a1c9876db9b831de421fe04750e11d9ed}{calculateVectorImpl}}(}
\DoxyCodeLine{218       \textcolor{keyword}{const} \mbox{\hyperlink{a01359}{Requirement}}\& par, \mbox{\hyperlink{a00375_aab9e3e38507d1db7602bc750718c302a}{VectorAffordance}} affordance, \textcolor{keyword}{typename} Traits::template VectorType<ScalarType> force,}
\DoxyCodeLine{219       \textcolor{keyword}{const} std::optional<std::reference\_wrapper<\textcolor{keyword}{const} Eigen::VectorX<ScalarType>>>\& dx = std::nullopt)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{220     \textcolor{keyword}{const} \textcolor{keyword}{auto} [L, l, Elin, Egl, dEdu, ddEddu] = \mbox{\hyperlink{a01519_aeab583c651a9704392133a98e58e6ad4}{computeStrain}}(par, dx);}
\DoxyCodeLine{221     force += E * A * Egl * L * dEdu;}
\DoxyCodeLine{222   \}}
\DoxyCodeLine{223 \};}
\DoxyCodeLine{224 }
\DoxyCodeLine{231 \textcolor{keyword}{inline} \textcolor{keyword}{auto} \mbox{\hyperlink{a00375_a1936b02a190200901c54cc8b1004506e}{truss}}(\textcolor{keyword}{const} \textcolor{keywordtype}{double} E, \textcolor{keyword}{const} \textcolor{keywordtype}{double} A) \{}
\DoxyCodeLine{232   \mbox{\hyperlink{a01523}{TrussPre}} pre(E, A);}
\DoxyCodeLine{233 }
\DoxyCodeLine{234   \textcolor{keywordflow}{return} pre;}
\DoxyCodeLine{235 \}}
\DoxyCodeLine{236 \} \textcolor{comment}{// namespace Ikarus}}

\end{DoxyCode}
